import{j as e,c as E,d as D}from"./ui-DyF7dzPS.js";import{r as p}from"./router-DOHa4S_O.js";import{e as F,u as B,i as M,B as C}from"./index-D2K44l9F.js";import{c as U}from"./utils-B_r5y0TZ.js";const Z="data:image/svg+xml,%3csvg%20width='18'%20height='19'%20viewBox='0%200%2018%2019'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M3.76744%209.60396C3.76744%209.00663%203.86665%208.43395%204.04372%207.89681L0.944372%205.53003C0.340326%206.75647%200%208.13842%200%209.60396C0%2011.0683%200.339907%2012.4494%200.943116%2013.675L4.04079%2011.3036C3.8654%2010.769%203.76744%2010.1984%203.76744%209.60396Z'%20fill='%23FBBC05'%20/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M9.20927%204.16981C10.5069%204.16981%2011.679%204.62962%2012.6%205.38204L15.279%202.70677C13.6465%201.28554%2011.5535%200.407715%209.20927%200.407715C5.56992%200.407715%202.4421%202.48899%200.944336%205.53002L4.04368%207.8968C4.75782%205.72899%206.7935%204.16981%209.20927%204.16981Z'%20fill='%23EB4335'%20/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M9.20927%2015.0381C6.7935%2015.0381%204.75782%2013.479%204.04368%2011.3112L0.944336%2013.6775C2.4421%2016.719%205.56992%2018.8002%209.20927%2018.8002C11.4555%2018.8002%2013.6%2018.0027%2015.2095%2016.5083L12.2676%2014.2339C11.4375%2014.7568%2010.3922%2015.0381%209.20927%2015.0381Z'%20fill='%2334A853'%20/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M17.9999%209.60393C17.9999%209.06051%2017.9162%208.4753%2017.7906%207.93188H9.20923V11.485H14.1488C13.9018%2012.6964%2013.2295%2013.6277%2012.2676%2014.2338L15.2095%2016.5082C16.9003%2014.939%2017.9999%2012.6015%2017.9999%209.60393Z'%20fill='%234285F4'%20/%3e%3c/svg%3e",q="data:image/svg+xml,%3csvg%20width='18'%20height='22'%20viewBox='0%200%2018%2022'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M12.2515%204.20393C13.0235%203.30923%2013.5438%202.0631%2013.4014%200.823242C12.289%200.865595%2010.9432%201.53387%2010.1455%202.4275C9.42922%203.22055%208.80395%204.48772%208.97204%205.70324C10.213%205.79535%2011.4796%205.09967%2012.2515%204.20393ZM15.0342%2012.0732C15.0653%2015.2783%2017.9679%2016.3444%2018%2016.3582C17.9764%2016.4333%2017.5364%2017.8773%2016.4711%2019.3702C15.5492%2020.6599%2014.5931%2021.9443%2013.0867%2021.9718C11.607%2021.9983%2011.1305%2021.1311%209.43779%2021.1311C7.74611%2021.1311%207.2172%2021.9442%205.81675%2021.9982C4.36277%2022.05%203.25462%2020.6029%202.32634%2019.3175C0.426954%2016.6885%20-1.02381%2011.888%200.924822%208.64809C1.89272%207.03976%203.62186%206.01973%205.49983%205.99431C6.92704%205.96784%208.27503%206.91458%209.14763%206.91458C10.0202%206.91458%2011.6584%205.77635%2013.38%205.94365C14.1006%205.97224%2016.1242%206.22203%2017.4229%208.04423C17.318%208.1067%2015.0085%209.39446%2015.0342%2012.0732Z'%20fill='black'%20/%3e%3c/svg%3e",z=({popup:j=!1})=>{const[l,N]=p.useState("login"),[n,h]=p.useState({username:"",password:""}),[r,g]=p.useState({username:"",email:"",password:"",confirmPassword:""}),[a,d]=p.useState({email:"",password:"",username:"",confirmPassword:""}),{login:w,signup:y,authError:u,setAuthError:c,isLoading:o}=F(),{trackFormSubmission:f}=B(),P=s=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s),b=s=>{const{name:t,value:x}=s.target;h(i=>({...i,[t]:x})),a[t]&&d(i=>({...i,[t]:""})),c("")},m=s=>{const{name:t,value:x}=s.target;g(i=>({...i,[t]:x})),a[t]&&d(i=>({...i,[t]:""})),c("")},A=()=>{const s={email:"",password:"",username:"",confirmPassword:""};return n.username.trim()||(s.username="Username is required"),n.password.trim()||(s.password="Password is required"),d(s),!Object.values(s).some(t=>t!=="")},L=()=>{const s={email:"",password:"",username:"",confirmPassword:""};return r.username.trim()||(s.username="Username is required"),r.email.trim()?P(r.email)||(s.email="Please enter a valid email address"):s.email="Email is required",r.password.trim()?r.password.length<6&&(s.password="Password must be at least 6 characters"):s.password="Password is required",r.confirmPassword.trim()?r.password!==r.confirmPassword&&(s.confirmPassword="Passwords do not match"):s.confirmPassword="Please confirm your password",d(s),!Object.values(s).some(t=>t!=="")},k=async()=>{if(f("login",{username:n.username}),!A())return;c(""),await w(n.username,n.password)&&h({username:"",password:""})},S=async()=>{if(f("signup",{username:r.username,email:r.email}),!L())return;c(""),await y(r.username,r.email,r.password)&&(await w(r.username,r.password),g({username:"",email:"",password:"",confirmPassword:""}))},v=s=>{o||(N(s),d({email:"",password:"",username:"",confirmPassword:""}),c(""))};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative flex mb-4 w-[193px] border border-black rounded-lg",children:[e.jsx("button",{onClick:()=>v("login"),className:`flex-1 py-2 text-sm font-semibold text-center relative z-10 transition-colors ${l==="login"?"text-white":"text-black"}`,disabled:o,children:"Log in"}),e.jsx("button",{onClick:()=>v("signup"),className:`flex-1 py-2 text-sm font-semibold text-center relative z-10 transition-colors ${l==="signup"?"text-white":"text-black"}`,disabled:o,children:"Sign up"}),e.jsx("div",{className:"absolute bg-black transition-transform duration-300 ease-in-out z-0 rounded-lg",style:{top:"-1px",bottom:"-1px",left:"-1px",width:"50%",transform:`translateX(${l==="signup"?"calc(100% + 1px)":"0%"})`}})]}),j&&e.jsx("h2",{className:"text-lg font-semibold mb-4 max-w-60",children:l==="login"?"Log in to continue to use Foodie":"Sign up to continue to use Foodie"}),u&&e.jsx(M,{message:u,type:"error",className:"mb-2"}),l==="login"&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",name:"username",placeholder:"Username",value:n.username,onChange:b,className:"w-full p-3 border border-border-primary rounded-lg text-[14px] placeholder:text-placeholder"}),a.username&&e.jsx("p",{className:"text-[12px] text-red-600 mt-1",children:a.username})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("input",{type:"password",name:"password",placeholder:"Password",value:n.password,onChange:b,className:"w-full p-3 border border-border-primary rounded-lg text-[14px] placeholder:text-placeholder"}),a.password&&e.jsx("p",{className:"text-[12px] text-red-600 mt-1",children:a.password})]}),e.jsx(C,{variant:"submit",onClick:k,disabled:o,children:o?"Logging in...":"Log in"})]}),l==="signup"&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",name:"username",placeholder:"Username",value:r.username,onChange:m,className:"w-full p-3 pr-10 border border-border-primary rounded-lg text-[14px] placeholder:text-placeholder"}),e.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2",children:a.username||u==="Username already taken."?e.jsx(E,{className:"w-6 h-6 text-red-500"}):e.jsx(D,{className:U("w-6 h-6",r.username.trim()?"text-green-500":"text-[#AFAFAF]")})})]}),a.username&&e.jsx("p",{className:"text-[12px] text-red-600 mt-1",children:a.username})]}),e.jsxs("div",{children:[e.jsx("input",{type:"email",name:"email",placeholder:"Email Address",value:r.email,onChange:m,className:"w-full p-3 border border-border-primary rounded-lg text-[14px] placeholder:text-placeholder"}),a.email&&e.jsx("p",{className:"text-[12px] text-red-600 mt-1",children:a.email})]}),e.jsxs("div",{children:[e.jsx("input",{type:"password",name:"password",placeholder:"Password",value:r.password,onChange:m,className:"w-full p-3 border border-border-primary rounded-lg text-[14px] placeholder:text-placeholder"}),a.password&&e.jsx("p",{className:"text-[12px] text-red-600 mt-1",children:a.password})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("input",{type:"password",name:"confirmPassword",placeholder:"Confirm Password",value:r.confirmPassword,onChange:m,className:"w-full p-3 border border-border-primary rounded-lg text-[14px] placeholder:text-placeholder"}),a.confirmPassword&&e.jsx("p",{className:"text-[12px] text-red-600 mt-1",children:a.confirmPassword})]}),e.jsx(C,{variant:"submit",onClick:S,disabled:o,children:o?"Creating Account...":"Create Account"})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-[12px] font-semibold mb-4",children:l==="login"?"Or log in with...":"Or sign up with..."}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{className:"w-full flex items-center justify-center gap-3 p-3 border border-[#DADADA] rounded-lg text-[13px] h-10",children:[e.jsx("img",{width:18,height:19,src:Z,alt:"Google"}),"Continue with Google"]}),e.jsxs("button",{className:"w-full flex items-center justify-center gap-3 p-3 border border-[#DADADA] rounded-lg text-[13px] h-10",children:[e.jsx("img",{width:18,height:22,src:q,alt:"Apple"}),"Continue with Apple"]})]})]})]})};export{z as L};
