{errorstyle}















<style type="text/css">
  #progressbar {
    background-color: #f5f7fe;
    border-radius: 21px;
    padding: 8px;
    width: 196px;
    height: 20px;
    border: 1px solid #c8acff;
    position: absolute;
    margin-left: auto;
    margin-right: auto;
    left: 0;
    right: 0;
    top: 111px;
  }

  #progressbar .innerbar {
    background-color: #4e03e0;
    width: 100%;
    height: 20px;
    border-radius: 10px;
    -webkit-animation: animateThis {loadtime}s ease;
    animation: loadingposts {loadtime}s ease;
  }

  @-webkit-keyframes loadingposts {
    0% {
      width: 20%;
    }

    100% {
      width: 100%;
    }
  }

  @keyframes loadingposts {
    0% {
      width: 20%;
    }

    100% {
      width: 100%;
    }
  }

  .image_checkboxes {
    min-height: 100px;
    display: flex;
    flex-wrap: wrap;
    position: relative;
  }

  .image_checkboxes .lds-dual-ring {
    display: inline-block;
    width: 92px;
    height: initial;
    position: absolute;
    margin-left: auto;
    margin-right: auto;
    left: 0;
    right: 0;
  }

  .lds-dual-ring:after {
    content: " ";
    display: block;
    width: 64px;
    height: 64px;
    margin: 8px;
    border-radius: 50%;
    border: 6px solid #1a73e7;
    border-color: #4e03e0 transparent #4e03e0 transparent;
    animation: lds-dual-ring 0.6s linear infinite;
  }

  @keyframes lds-dual-ring {
    0% {
      transform: rotate(0deg);
    }

    100% {
      transform: rotate(360deg);
    }
  }






  /* Safari */



  @-webkit-keyframes spin {



    0% {



      -webkit-transform: rotate(0deg);



    }







    100% {



      -webkit-transform: rotate(360deg);



    }



  }







  @keyframes spin {



    0% {



      transform: rotate(0deg);



    }







    100% {



      transform: rotate(360deg);



    }



  }











  .orderstatus {



    display: inline-block;







    width: 100%;







    padding: 10px;







    background-color: #f5f7fe;







    box-sizing: border-box;



    margin: 41px 0;



  }







  .selectedposts {



    float: left;







    margin-top: 14px !important;







    color: #000 !important;



    font-size: 12px;



  }








  #shownopostmsg {
    display: none;
  }






  .selectedposts .amount_of_posts,



  .selectedposts .likes_per_post {



    font-weight: bold;



    display: unset !important;



    font-size: inherit !important;



    margin-top: 0 !important;



    color: #000;



  }















  .btn {



    width: 120px !important;







    float: right;



    text-align: center;







    margin: 0 !important;







    padding: 9px 15px !important;



  }























  .image_checkboxes div {



    position: relative;



    display: inline-block;



    width: 150px;



    height: 200px;




    overflow: hidden;



  }







  .image_checkboxes div .amount {



    position: absolute;



    display: none;



    color: #fff;







    background: rgba(0, 0, 0, .65);







    height: 30px;







    text-align: center;







    box-sizing: border-box;







    width: 100%;



    margin: 0;







    font-size: 14px;







    line-height: 25px;



  }







  .image_checkboxes div img {



    width: 100%;


  }







  .image_checkboxes .active {



    border-color: #4e03e0;



  }







  .image_checkboxes .active .amount {



    display: block;



  }















  .whichpackage {



    text-align: center !important;







    font-size: 15px;







    color: #464646;



  }







  .whichpackage a {



    color: #4e03e0;







    text-decoration: underline;



  }















  @media only screen and (min-width: 768px) {







    .container {















      padding: 37px 3% !important;







    }















  }
</style>















<div class="orderbody" align="center">























  <div class="cnwidth">















    {discountnotifcart}















    <div class="steps">























      <div class="number">1</div>







      <div class="numlabel">Details</div>







      <svg class="greyarrow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 31.5 31.5">



        <path
          d="M21.2 5c-0.4-0.4-1.1-0.4-1.6 0 -0.4 0.4-0.4 1.1 0 1.6l8 8H1.1C0.5 14.6 0 15.1 0 15.7c0 0.6 0.5 1.1 1.1 1.1h26.6l-8 8c-0.4 0.4-0.4 1.2 0 1.6 0.4 0.4 1.2 0.4 1.6 0l10-10c0.4-0.4 0.4-1.1 0-1.6L21.2 5z" />



      </svg>























      <div class="number numbergrey">2</div>







      <div class="numlabel labelgrey">Payment</div>







      <svg class="greyarrow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 31.5 31.5">



        <path
          d="M21.2 5c-0.4-0.4-1.1-0.4-1.6 0 -0.4 0.4-0.4 1.1 0 1.6l8 8H1.1C0.5 14.6 0 15.1 0 15.7c0 0.6 0.5 1.1 1.1 1.1h26.6l-8 8c-0.4 0.4-0.4 1.2 0 1.6 0.4 0.4 1.2 0.4 1.6 0l10-10c0.4-0.4 0.4-1.1 0-1.6L21.2 5z" />



      </svg>























      <div class="number numbergrey">3</div>







      <div class="numlabel labelgrey">Complete</div>















    </div>







    <form id="idform" method="POST">







      <div class="container dshadow">















        <h1>Select Your Posts</h1>







        <div class="whichpackage">{packagedesc} <a href="/order/details/">Change package</a></div>















        <div class="orderstatus">























          <div class="selectedposts"><span class="amount_of_posts">0</span> <b>posts</b> Selected / <span
              class="likes_per_post">0</span> <b id="pkgType">{packageType}</b> per post</div>























          <input type="hidden" id="posts_selected" name="posts_selected">



          <input type="hidden" id="posts_selected_image" name="posts_selected_image">



          <input type="submit" style="display:none;" value="submit">























          <a onclick="submitform();" href="#" class="btn">Next &raquo;</a>















        </div>



        <div class="container dshadow" id="shownopostmsg" {shownopostmsg} style="width: 100%;">


          <h1 style="color: #e49300;font-size: 24px;margin: auto;">Oops! there's a tiny problem...</h1>
          <div style="margin-top: 26px;">
            Unfortunately, we've been unable to get your Tiktok information.
            <br><br>
            To continue your order, you will need to either:
            <ul class="problem">

              <li><b>An incorrect Tiktok username: </b>If you've typed in an incorrect Tiktok username, we will need a
                correct Tiktok username. To change your username, please click on the "Change Tiktok Username" button.
              </li>
              <br>
              <li><b>Your account is on private:</b> If your account is set on "private". Please change your account to
                "public" on your Tiktok settings. Once you've set your account to public, please click on the "I've set
                my account to public" button.</li>



            </ul>
            <br><br>
          </div>

          <a class="color4 btn dshadow" style="text-align: center;width: 100%!important;padding: 13px!important;"
            href="{back}">Change Tiktok Username</a>

          <a class="color4 btn dshadow"
            style="text-align: center;margin-top: 36px!important;width: 100%!important;padding: 13px!important;"
            href="?setpublic=true">I've set my account on public</a>


        </div>



        <div id="loadpic" class="image_checkboxes">







          <div id="loadingdiv" class="lds-dual-ring"></div>
          <div id="progressbar">
            <div class="innerbar"></div>
          </div>


        </div>















        <div class="image_checkboxes">















          {imgs}















        </div>















        <div class="orderstatus">























          <div class="selectedposts"><span class="amount_of_posts">0</span> <b>posts</b> Selected / <span
              class="likes_per_post">0</span> <b>likes</b> per post</div>















          <a onclick="submitform();" href="#" class="btn">Next &raquo;</a>















        </div>







































      </div>



    </form>















  </div>















</div>















{userNameTextBox}



















<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>







<script src="/js/orderform.js"></script>















<script type="text/javascript">







  var selected_list = JSON.parse('{selectedlist}');



  var selected_list_image = JSON.parse('{selectedlist_image}');



  var limit = {postlimit};







  var max_amount_likes = {maxamount};







  var amount_of_posts = Object.keys(selected_list).length;















  update_selected_list();















  $('.image_checkboxes').on("click", "div", function () {







    var image = this;







    var input = $(this).prev();







    var value = $(image).attr('data-value');



    var value1 = $(image).attr('data-value-image');











    if (value in selected_list) {







      delete selected_list[value];



      delete selected_list_image[value1];







    } else {







      if (amount_of_posts >= limit) { return max_limit_hit(); }







      selected_list[value] = value;



      selected_list_image[value1] = value1;







    }







    amount_of_posts = Object.keys(selected_list).length;















    update_selected_list();







  });















  function max_limit_hit() {







    alert('Max limit of ' + limit + ' is reached');







    return;







  }







  function update_selected_list() {







    var checkbox_cn = $('.img-responsive');







    $(checkbox_cn).each(function () {







      var image = this;







      var value = $(image).attr('data-value');





      if (value in selected_list) {







        $(image).addClass('active');



      } else {

        $(image).removeClass('active');



      }


    });



    $('#posts_selected').val(JSON.stringify(selected_list));



    $('#posts_selected_image').val(JSON.stringify(selected_list_image));



    update_likes_statistics();



  }



  function update_likes_statistics() {

    var likes_per_post = Math.floor(max_amount_likes / amount_of_posts);





    if (likes_per_post == Infinity) { likes_per_post = 0; }





    $('.likes_per_post').html(likes_per_post);


    $('.amount_of_posts').html(amount_of_posts);



    var pkgType = $("#pkgType").text();


    $('.image_checkboxes div .amount').html('+' + likes_per_post + ' ' + pkgType);

  }


  function submitform() {


    if (amount_of_posts == '0') { alert('Please select a post.'); } else { document.getElementById('idform').submit(); }

  }

  getTikTokPosts();


  function getTikTokPosts() {


    var uName = $("#UserNameID").val();


    $.ajax({



      url: '/api/gettiktokinfo.php',


      data: { "username": uName, "type": "PostFeed", "ordersession_id": '{ordersession_id}' },

      type: 'post',


      success: function (output) {




        output = output.substr(output.indexOf('{'));

        var isValid = isJsonString(output);

        if (isValid) {

          var res = $.parseJSON(output);



          if (res.Posts[0] == "No Post") {

            $("#loadpic").html("No Post Found");



            return;

          }





          var htm = "";



          for (i = 0; i < res.Posts.length; i++) {





            htm += '<div data-value="' + res.PostsLink[i] + '" data-value-image="' + res.awsPaths[i] + '" class="img-responsive"><div class="amount">+50 likes</div><img style="border: 2px solid transparent; box-sizing: border-box; margin: 4px;" src="' + res.Posts[i] + '"></div>';



          }



          $("#loadpic").html(htm);



          update_selected_list();



          // console.log(res.Posts[0]);



        }

        else {

          document.getElementById("shownopostmsg").style.display = "block";
          document.getElementById("loadpic").style.display = "none";
          $('.orderstatus').hide();

          return;

        }



      }



    });



  }



  function isJsonString(str) {

    try {

      JSON.parse(str);

    } catch (e) {

      return false;

    }

    return true;

  }

</script>