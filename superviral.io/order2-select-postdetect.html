{errorstyle}



<style type="text/css">

  .orderstatus {

    display: inline-block;

    width: 100%;

    padding: 10px;

    background-color: #f5f7fe;

    box-sizing: border-box;

    margin: 41px 0;

  }



  .selectedposts {

    float: left;

    margin-top: 14px !important;

    color: #000 !important;

    font-size: 12px;

  }



  .selectedposts .amount_of_posts,

  .selectedposts .likes_per_post {

    font-weight: bold;

    display: unset !important;

    font-size: inherit !important;

    margin-top: 0 !important;

    color: #000;

  }



  .btn {

    width: 120px !important;

    float: right;

    text-align: center;

    margin: 0 !important;

    padding: 9px 15px !important;

  }



  .btn1 {

    width: 80% !important;

    float: none;

    text-align: center;

    padding: 9px 15px !important;

    margin-top: 30px !important;

    font-size: 16px;

    border-radius: 30px !important;

    box-sizing: border-box;

    outline: 0;

    border: 1px solid #bbb;

    color: #fff;

    display: block;

    margin: 5px auto;

    font-weight: bold;

  }



  .btnnxt {

    width: initial !important;

    display: inline-block;

  }



    .image_checkboxes {
      min-height: 150px;
      display: flex;
      flex-wrap: wrap;
      position: relative;
    }

    .image_checkboxes .img-responsive {
      position: relative;
      display: inline-block;
      width: 33% !important;
      height: 120px;
      float: left;
      border: 2px solid transparent;
      overflow: hidden;
      box-sizing: border-box;
      margin: 0 !important;
    }


    .image_checkboxes .img-responsive .amount {
      position: absolute;
      display: none;
      color: #fff;
      background: #1a73e7;
      margin: 0 !important;
      height: 26px !important;
      text-align: center;
      box-sizing: border-box;
      width: 100% !important;
      margin: 0;
      font-size: 14px;
      line-height: 25px;
      bottom:0;
     z-index: 9999;
    font-weight: bold;
    }

   .image_checkboxes .img-responsive .tick {
    width: 100%;
    height: 100%;
    background: rgb(0 0 0 / 35%);
    z-index: 9999;
    position: absolute;
    text-align: center;
    display:none;
    }

    .image_checkboxes .img-responsive .tick img{    height: initial;
    width: 44px;
    margin-top: 26px;}


    .image_checkboxes .img-responsive img {
      width: 100%;
      height: 100%;
    }

    .image_checkboxes .active {
      border-color: #1a73e7;
    }

    .image_checkboxes .active .amount {
      display: block;
    }

    .image_checkboxes .active .tick {
      display: block;
    }




  .whichpackage {

    text-align: center !important;

    font-size: 13px;

    color: #464646;

    margin-top: 3px;

  }



  .whichpackage a {

    color: #4e03e0;

    text-decoration: underline;

  }



  .problem li {

    margin-bottom: 15px;

  }





  .image_checkboxes .lds-dual-ring {

    display: inline-block;

    width: 92px;

    height: initial;

    position: absolute;

    margin-left: auto;

    margin-right: auto;

    left: 0;

    right: 0;

  }



  .lds-dual-ring:after {

    content: " ";

    display: block;

    width: 64px;

    height: 64px;

    margin: 8px;

    border-radius: 50%;

    border: 6px solid #1a73e7;

    border-color: #4e03e0 transparent #4e03e0 transparent;

    animation: lds-dual-ring 0.6s linear infinite;

  }



  #shownopostmsg {

    display: none;

  }





  @keyframes lds-dual-ring {

    0% {

      transform: rotate(0deg);

    }



    100% {

      transform: rotate(360deg);

    }

  }

  .whichpackage{display:none;}

  .pdchangepackagediv{background-color: #f5f7fe;
    padding: 10px;
    border-radius: 5px;
    margin-top: 40px;}

  .container div span.pdchangepackagespan{margin-top: 0px;
    color: black;
    font-weight: bold;}






  #progressbar {

    background-color: #f5f7fe;

    border-radius: 21px;

    padding: 8px;

    width: 196px;

    height: 20px;

    border: 1px solid #c8acff;

    position: absolute;

    margin-left: auto;

    margin-right: auto;

    left: 0;

    right: 0;

    top: 111px;

  }



  #progressbar .innerbar {

    background-color: #4e03e0;

    width: 100%;

    height: 20px;

    border-radius: 10px;

    -webkit-animation: animateThis 8s ease;

    animation: loadingposts 8s ease;

  }











  @-webkit-keyframes loadingposts {

    0% {

      width: 15%;

    }



    100% {

      width: 100%;

    }

  }



  @keyframes loadingposts {

    0% {

      width: 15%;

    }



    100% {

      width: 100%;

    }

  }











  #shownopostmsg {

    display: none;

  }







  @media only screen and (min-width:540px) {


      .image_checkboxes .img-responsive {
        width: 150px !important;
        height: 150px !important;
        margin: 4px !important;
      }

.image_checkboxes .img-responsive .tick img{
          width: 50px;
    margin-top: 40px;
}


  }





  @media only screen and (min-width: 768px) {

    .container {



      padding: 37px 3% !important;

    }



  }





  .stepsbar {

    -webkit-animation: animateThis 1s ease;

    animation: animateThis 1s ease;

    background: rgb(78, 3, 224);

    height: 100%;

    width: 75%;

  }





  @-webkit-keyframes animateThis {

    0% {

      width: 50%;

    }



    100% {

      width: 75%;

    }

  }



  @keyframes animateThis {

    0% {

      width: 50%;

    }



    100% {

      width: 75%;

    }

  }

</style>



<div class="orderbody" align="center">





  <div class="cnwidth">



    {discountnotifcart}







    <div class="liveholder"><span class="livebox"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"

          class="livesvg">

          <path d="M256 0C115.4 0 0 115.4 0 256s115.4 256 256 256 256-115.4 256-256S396.6 0 256 0z" />

        </svg> Live</span><span id="livecount" class="livecount"></span> {usercheckoutlabel}</div>



    <form id="idform" method="POST">



      <div class="container dshadow" id="shownopostmsg" {shownopostmsg}>





        <h1 style="color: #e49300;font-size: 24px;">{errh1}</h1>

        <div style="margin-top: 26px;">{errdesc}



          <ul class="problem">



            <li>{errpoint1}</li>

            <li>{errpoint2}</li>







          </ul>

          <br><br>

        </div>



        <a class="color4 btn dshadow" style="text-align: center;width: 100%!important;padding: 13px!important;"

          href="{back}">{errbtn1}</a>



        <a class="color4 btn dshadow"

          style="text-align: center;margin-top: 36px!important;width: 100%!important;padding: 13px!important;"

          href="?setpublic=true">{errbtn2}</a>





      </div>













      <div class="container dshadow" id="dontshowselectctn">



        <h1>{h1}</h1>

        <div class="whichpackage"><c id="packageDescId">{packagedesc}</c> 

          <a style ="{pointerCss}" href="{changepackagehref}">{changepackage}</a></div>

        <div class="pdchangepackagediv">

            <span class="pdchangepackagespan">Change package:</span>

            {changePackageDropDown}



        </div>



        <div class="orderstatus">





          <div class="selectedposts">{selectedposts}</div>





          <input type="hidden" id="posts_selected" name="posts_selected">

          <input type="submit" style="display:none;" value="submit">





          <a onclick="submitform();" href="#" class="color4 btn btnnxt">{nextbtn} &raquo;</a>



        </div>





        <div id="loadpic" class="image_checkboxes">







          <div id="loadingdiv" class="lds-dual-ring"></div>









          <div id="progressbar">







            <div class="innerbar"></div>







          </div>



        </div>



        <div class="orderstatus">





          <div class="selectedposts">{selectedposts}</div>



          <a onclick="submitform();" href="#" class="color4 btn btnnxt">{nextbtn} &raquo;</a>



        </div>



      </div>



      <!-- <div class="container dshadow" id="manualselectdiv" style="display: none;">



        <h1>{h1}</h1>

        <div class="whichpackage">{packagedesc} <a href="{changepackagehref}">{changepackage}</a></div>



        <div class="orderstatus">





          <div class="selectedposts">{selectedposts}</div>





          <input type="hidden" id="instaCombinedPosts" name="instaCombinedPosts">



        </div>





        <div class="whichpackage" style="width: 90%;">

          <p style="float: left; margin-left: 15px;">Paste the sharing link to your Instagram post:</p>



          <div id="bindInpBox">

            <div>

              <input id="instaPost" name="instaPost" placeholder="Sharing link to IG post" style="width: 90%">

            </div>





          </div>

        </div>



        <div>

          <a class="btn1 btn3" id="addBtnID" style="width: 210px!important;color: #000;" href="#0"><img

              src="/imgs/plus.png" style="width:20px;float: left;">Add another post</a>

        </div>

        <div>

          <a href="#0" onclick="submitmanualform();" class="btn1 color4 ">{nextbtn} &raquo;</a>

        </div>











      </div> -->



    </form>



  </div>



</div>











<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>

<script src="/js/orderform.js"></script>



<script type="text/javascript">



// post detection dropdown

$('#get_value')

.on('change', function() {

  



var newvalue = $('#get_value').val();

// alert(newvalue);

// $('#idform').append('<input type="hidden" name="package" value="' + newvalue + '" />');





    $.ajax({

      type: "POST",

      url: "/ajax-post.php",

     // url: 'http://superviral.lcl/ajax-post.php',

      data: { "type": "updatePackage", "package": newvalue, "orderSession": "{ordersession}"},

      dataType: "json",

      success: function (data) {

        selected_list = JSON.parse(data.selectedlist);

        limit = data.postlimit;

        max_amount_likes = data.maxamount;

        amount_of_posts = Object.keys(selected_list).length;

        postURL = data.postURL;

        $("#packageDescId").html(data.packagedesc);

        $('#loadpic .img-responsive').removeClass('active');

        update_selected_list();

      },

    });



});

// end





  var selected_list = JSON.parse('{selectedlist}');

  var limit = {postlimit};

  var max_amount_likes = {maxamount};

  var amount_of_posts = Object.keys(selected_list).length;

  var postURL = "{postURL}";

  update_selected_list();

  $('.image_checkboxes').on("click", "div", function () {

    var image = this;

    var input = $(this).prev();

    var value = $(image).attr('data-value');



    if (value in selected_list) {

      delete selected_list[value];

    } else {

      if (amount_of_posts >= limit) { return max_limit_hit(); }

      selected_list[value] = value

    }

    amount_of_posts = Object.keys(selected_list).length;



    update_selected_list();

  });



  function max_limit_hit() {

    alert('{maxlimitreached}');

    return;

  }







  function update_selected_list() {

    var countPost = 1;

    var checkbox_cn = $('.img-responsive');

    $(checkbox_cn).each(function () {

      var image = this;

      var value = $(image).attr('data-value');

      if (value in selected_list) { 

        if(limit >= countPost){

          $(image).addClass('active');

          countPost++;

          amount_of_posts = countPost -1;

        }else{

          delete selected_list[value];

        }

        

      } else {

        $(image).removeClass('active');

      }

    });

    $('#posts_selected').val(JSON.stringify(selected_list));

    update_likes_statistics();

  }







  function update_likes_statistics() {

    var likes_per_post = Math.floor(max_amount_likes / amount_of_posts);





    if (likes_per_post == Infinity) { likes_per_post = 0; }



    $('.likes_per_post').html(likes_per_post);

    $('.amount_of_posts').html(amount_of_posts);

    $('.image_checkboxes div .amount').html('+' + likes_per_post + ' {divboxpckg}');

  }



  function submitform() {



    if (amount_of_posts == '0') { alert('{errorselect}'); } else { document.getElementById('idform').submit(); }



  }



  // function submitmanualform() {

  //   var values = [];

  //   $("input[name='instaPost']").each(function () {

  //     values.push($(this).val());

  //   });

  //   $("#instaCombinedPosts").val(values);

  //   if (values[0] == '') { 

  //     alert('Please enter at least one sharing link to your post. Thank you!'); 

  //   }

  //   else { document.getElementById('idform').submit(); }



  // }



var globTypeOfPostSelectCount = 0;  

  // function checkAdminStats() {



  //   $.ajax({

  //     type: "POST",

  //     url: "https://{sdblivecheckout}superviral.io/ajax-post.php",

  //     url: 'http://superviral.lcl/ajax-post.php',

  //     data: { "type": "checkAdminStats" },

  //     success: function (data) {

  //       globTypeOfPostSelectCount = data;

  //       if (data == 1) {

  //         $("#dontshowselectctn").hide();

  //         $("#manualselectdiv").show();

  //         amount_of_posts = 1;

  //         update_likes_statistics();

  //         postURLBind();

  //       } else {

  //         $("#manualselectdiv").hide();

  //         $("#dontshowselectctn").show();

  //       }

  //     },

  //   });

  

  // }



  function liveusers() {

    var feedback = $.ajax({

      type: "GET",

      url: "/livecheckout.php",

     // url: "http://superviral.lcl/livecheckout.php",

      async: false

    }).complete(function () {

      setTimeout(function () { liveusers(); }, 3000);

    }).responseText;



    $('.livecount').html(feedback);





  }



  liveusers();



  $("#loadpic").load("/api-v2/?postdetection=true&datatype=thumbs&ordersession={ordersession}&username={username}{videosonly}", function () {

    update_selected_list();



    if (this.innerHTML.indexOf("Error 3420") >= 0 && globTypeOfPostSelectCount == 0) {



      document.getElementById("shownopostmsg").style.display = "block";

      document.getElementById("dontshowselectctn").style.display = "none";



    }



  });



  function loadPosts(itr){

       let url = "";

       let userId = $("#instaUserId").val();

       let thirdItrData = $("#thirdIterationData").html();



       url = "/api-load-more-post/?datatype=thumbs&ordersession={ordersession}&username={username}{videosonly}";

       var loaderHtm = '<div id="loadingdiv" class="lds-dual-ring"></div>'+

                         '<div id="progressbar" >'+

                         '<div class="innerbar"></div>'+

                       '</div>';

                       $("#loaderLoadMoreId").html(loaderHtm);

                       $("#loadMoreBtnId").hide();

                       $("#loaderLoadMoreId").attr("style","margin-top: 165px;height: 165px;");

                       if(itr == "second")

                       $("#progressbar").attr("style",'top:640px;');

                       else

                       $("#progressbar").attr("style",'top:1115px;');

                         

                       setTimeout(function(){

                            callAjax(url, userId, itr, thirdItrData);

                          },1000)

      

  



}



function callAjax(url, userId, itr, thirdItrData){

  $.ajax({

      url: url,

      type:"POST",

      async: false,

      dataType:'json',

      data: {

          "userId" : userId,

          "iteration": itr,

          "thirdItrData" : thirdItrData

      },

      success: function(response){ 

        // console.log(response);

        // if(itr == "")

        //   $("#loadpic").html("");

       

        if(itr == ""){

          // $("#loadpic").html(response.htmlPost + response.htmlBtn + response.htmlData);

        }

        else{

          $("#loaderLoadMoreId").html("");

          $("#loaderLoadMoreId").attr("style","");

          $("#loaderLoadMoreId").attr('id','loaderLoadMoreId1');

          

          $("#loadMoreBtnId").attr('id','loadMoreBtnId1');

        

          if(response.htmlBtn == null){

            response.htmlBtn = "";

          }

          $("#loadpic").append(response.htmlPost + response.htmlBtn + response.htmlData);

        }



        update_selected_list();

      },

  });

}







  function postURLBind() {



    var postURLArr = postURL.split(',');

    if(postURLArr.length > 0) {

      var i;

      var inputBind = "";

      for(i=1; i<=postURLArr.length; i++) {

        if(i == 1){

          $("#instaPost").val(postURLArr[i-1]);

        }else{

          inputBind = '<div><input id="instaPost' + i + '" name="instaPost" value="'+ postURLArr[i-1] +'" placeholder="Sharing link to IG post" style="width: 90%"><img   class= "removeInpClass"    id="reqsr' + i + '" src="/imgs/close.png" style="cursor:pointer;width:20px;margin-left:5px;"></div>';

        }

        $("#bindInpBox").append(inputBind);

      }

      

      amount_of_posts = i-1;

      update_selected_list();



    var MaxInputs = limit; //maximum extra input boxes allowed

    var InputsWrapper = $("#bindInpBox"); //Input boxes wrapper ID

    var AddButton = $("#addBtnID"); //Add button ID



    var x = InputsWrapper.length; //initlal text box count

    var FieldCount = 1; //to keep track of text box added

    x = i-1;

    //on add input button click

    $(AddButton).click(function (e) {

      var input = '<div><input id="instaPost' + FieldCount + '" name="instaPost" placeholder="Sharing link to IG post" style="width: 90%"><img   class= "removeInpClass"    id="reqsr' + FieldCount + '" src="/imgs/close.png" style="cursor:pointer;width:20px;margin-left:5px;"></div>';

      //max input box allowed

      if (x < MaxInputs) {

        FieldCount++; //text box added ncrement

        //add input box

        $(InputsWrapper).append(input);

        x++; //text box increment



      }else{

        alert('{maxlimitreached}');

      }

      amount_of_posts = x;

      update_selected_list();

      return false;

    });



    $("body").on("click", ".removeInpClass", function (e) { //user click on remove text

      if (x > 1) {

        $(this).parent('div').remove(); //remove text box

        x--; //decrement textbox



      }

      amount_of_posts = x;

      update_selected_list();

      return false;

    })



    }



  }









</script>



