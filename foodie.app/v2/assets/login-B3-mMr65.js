import{j as e}from"./ui-BzOqx__m.js";import{r as d,u as w}from"./router-CU-cR3Wo.js";import{B as b}from"./button-bcolQvQi.js";import{g as v,V as p,s as g}from"./index-B0ZBJbb0.js";import"./vendor-DJG_os-6.js";import"./utils-B_r5y0TZ.js";const E=()=>{const[a,x]=d.useState({email:"",password:""}),[r,o]=d.useState({email:"",password:"",general:""}),[i,c]=d.useState(!1),l=w();d.useEffect(()=>{v("auth_token")&&l("/")},[l]);const f=()=>{const s={email:"",password:"",general:""};return a.email?/\S+@\S+\.\S+/.test(a.email)||(s.email="Please enter a valid email address"):s.email="Email address is required",a.password||(s.password="Password is required"),o(s),!s.email&&!s.password},h=async s=>{if(s.preventDefault(),!!f())if(c(!0),o({email:"",password:"",general:""}),await new Promise(t=>setTimeout(t,1e3)),a.email===p.email&&a.password===p.password){const t=`user_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;g("auth_token",t,24),g("user_email",a.email,24);const n=sessionStorage.getItem("intendedPath");n?(sessionStorage.removeItem("intendedPath"),l(n,{replace:!0})):l("/",{replace:!0})}else o({...r,general:"Invalid email or password. Please try again."}),c(!1)},u=s=>{const{name:t,value:n}=s.target;x(m=>({...m,[t]:n})),r[t]&&o(m=>({...m,[t]:""}))};return e.jsxs("div",{className:"pt-12 px-4 sm:px-6 md:px-0 md:max-w-md mx-auto",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Login"}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:h,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:`
                  relative block w-full px-4 py-3 border rounded-lg 
                  placeholder-gray-500 text-gray-900 focus:outline-none 
                  focus:ring-2 focus:ring-blue-500 focus:border-blue-500 
                  focus:z-10 sm:text-sm transition-colors
                  ${r.email?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300"}
                `,placeholder:"Email address",value:a.email,onChange:u,disabled:i}),r.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.email})]}),e.jsxs("div",{children:[e.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:`
                  relative block w-full px-4 py-3 border rounded-lg 
                  placeholder-gray-500 text-gray-900 focus:outline-none 
                  focus:ring-2 focus:ring-blue-500 focus:border-blue-500 
                  focus:z-10 sm:text-sm transition-colors
                  ${r.password?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300"}
                `,placeholder:"Password",value:a.password,onChange:u,disabled:i}),r.password&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.password})]})]}),r.general&&e.jsx("div",{className:"rounded-md bg-red-50 p-4",children:e.jsx("p",{className:"text-sm text-red-800",children:r.general})}),e.jsx("div",{children:e.jsx(b,{type:"submit",disabled:i,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:i?e.jsxs("div",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing in..."]}):"Log in"})})]})]})};export{E as default};
