import{j as e,X as M,e as B}from"./ui-DoO2UWBD.js";import{r as n,u as E}from"./router-ukBvSjMY.js";import{D as H,b as S,c as y,B as v,S as T,M as D,e as Z}from"./index--hlRkLZC.js";import{c as g}from"./utils-B_r5y0TZ.js";import"./vendor-DJG_os-6.js";const V=({active:x,width:r=26,height:l=26})=>e.jsx("svg",{width:r,height:l,viewBox:"0 0 31 31",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{id:"Vector",d:"M29.5 13.6162V29.5H22.168V19.167H8.83203V29.5H1.5V13.6162L15.5 1.95215L29.5 13.6162Z",fill:x?"black":"white",stroke:"black",strokeWidth:3})}),A=({width:x=15,height:r=15})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:x,height:r,viewBox:"0 0 15 15",fill:"none",children:e.jsx("path",{d:"M14.25 4.5H10.5V0.75C10.5 0.551088 10.421 0.360322 10.2803 0.21967C10.1397 0.0790176 9.94891 0 9.75 0H5.25C5.05109 0 4.86032 0.0790176 4.71967 0.21967C4.57902 0.360322 4.5 0.551088 4.5 0.75V4.5H0.75C0.551088 4.5 0.360322 4.57902 0.21967 4.71967C0.0790176 4.86032 0 5.05109 0 5.25V15H6.75V12.75C6.75 12.5511 6.82902 12.3603 6.96967 12.2197C7.11032 12.079 7.30109 12 7.5 12C7.69891 12 7.88968 12.079 8.03033 12.2197C8.17098 12.3603 8.25 12.5511 8.25 12.75V15H15V5.25C15 5.05109 14.921 4.86032 14.7803 4.71967C14.6397 4.57902 14.4489 4.5 14.25 4.5ZM3 13.5H1.5V12H3V13.5ZM3 10.5H1.5V9H3V10.5ZM3 7.5H1.5V6H3V7.5ZM8.25 9.75H6.75V8.25H8.25V9.75ZM8.25 6.75H6.75V5.25H8.25V6.75ZM8.25 3.75H6.75V2.25H8.25V3.75ZM13.5 13.5H12V12H13.5V13.5ZM13.5 10.5H12V9H13.5V10.5ZM13.5 7.5H12V6H13.5V7.5Z",fill:"black"})});function I({open:x,onOpenChange:r,addressType:l}){const[i,d]=n.useState({line1:"",line2:"",line3:""}),[t,o]=n.useState({line1:"",line2:"",line3:""}),[u,c]=n.useState(!1),m=(a,h)=>{d(b=>({...b,[a]:h})),t[a]&&o(b=>({...b,[a]:""}))},p=()=>{const a={line1:"",line2:"",line3:""};return i.line1.trim()||(a.line1="Address line 1 is required"),i.line3.trim()||(a.line3="Postcode is required"),o(a),!Object.values(a).some(h=>h!=="")},f=async()=>{if(p()){c(!0);try{console.log(`${l} address:`,i),await new Promise(a=>setTimeout(a,500)),d({line1:"",line2:"",line3:""}),o({line1:"",line2:"",line3:""}),r==null||r(!1)}catch(a){console.error(`Failed to save ${l} address:`,a),alert(`Failed to save ${l} address. Please try again.`)}finally{c(!1)}}},s=()=>{d({line1:"",line2:"",line3:""}),o({line1:"",line2:"",line3:""}),r==null||r(!1)};return e.jsx(H,{open:x,onOpenChange:s,children:e.jsxs(S,{className:"max-w-[350px] pt-4 pb-5 px-5 border-none rounded-[14px] gap-4",children:[e.jsxs(y,{className:"text-lg font-semibold flex items-end gap-2",children:[e.jsx("span",{className:"mb-[7px]",children:l==="Home"?e.jsx(V,{active:!0,width:18,height:18}):e.jsx(A,{width:18,height:18})}),e.jsx("span",{children:l})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[14px] font-semibold mb-2 block",children:"Address"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",placeholder:"10 high street",value:i.line1,onChange:a=>m("line1",a.target.value),className:"w-full p-2 border border-border-primary rounded-lg placeholder:text-placeholder"}),t.line1&&e.jsx("p",{className:"text-[12px] text-red-600 mt-1",children:t.line1})]}),e.jsxs("div",{children:[e.jsx("input",{type:"text",placeholder:"10 high street",value:i.line2,onChange:a=>m("line2",a.target.value),className:"w-full p-2 border border-border-primary rounded-lg placeholder:text-placeholder"}),t.line2&&e.jsx("p",{className:"text-[12px] text-red-600 mt-1",children:t.line2})]}),e.jsxs("div",{children:[e.jsx("input",{type:"text",placeholder:"B1 2JO",value:i.line3,onChange:a=>m("line3",a.target.value),className:"w-full p-2 border border-border-primary rounded-lg placeholder:text-placeholder"}),t.line3&&e.jsx("p",{className:"text-[12px] text-red-600 mt-1",children:t.line3})]})]})]}),e.jsx(v,{variant:"submit",onClick:f,disabled:u,children:u?"Adding...":`Add ${l} Address`})]})]})})}function q({open:x,onOpenChange:r}){const[l,i]=n.useState({placeName:"",addressLine1:"",addressLine2:"",addressLine3:""}),[d,t]=n.useState({placeName:"",addressLine1:"",addressLine2:"",addressLine3:""}),[o,u]=n.useState(!1),c=(s,a)=>{i(h=>({...h,[s]:a})),d[s]&&t(h=>({...h,[s]:""}))},m=()=>{const s={placeName:"",addressLine1:"",addressLine2:"",addressLine3:""};return l.placeName.trim()||(s.placeName="Place name is required"),l.addressLine1.trim()||(s.addressLine1="Address line 1 is required"),l.addressLine3.trim()||(s.addressLine3="Postcode is required"),t(s),!Object.values(s).some(a=>a!=="")},p=async()=>{if(m()){u(!0);try{console.log("Saved place:",l),await new Promise(s=>setTimeout(s,500)),i({placeName:"",addressLine1:"",addressLine2:"",addressLine3:""}),t({placeName:"",addressLine1:"",addressLine2:"",addressLine3:""}),r==null||r(!1)}catch(s){console.error("Failed to save place:",s),alert("Failed to save place. Please try again.")}finally{u(!1)}}},f=()=>{i({placeName:"",addressLine1:"",addressLine2:"",addressLine3:""}),t({placeName:"",addressLine1:"",addressLine2:"",addressLine3:""}),r==null||r(!1)};return e.jsx(H,{open:x,onOpenChange:f,children:e.jsxs(S,{className:"max-w-[350px] pt-4 pb-5 px-5 border-none rounded-[14px] gap-4",children:[e.jsx(y,{className:"text-lg font-semibold",children:"Add saved place"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[14px] font-semibold mb-2 block",children:"Place name"}),e.jsx("input",{type:"text",placeholder:"Alex's house",value:l.placeName,onChange:s=>c("placeName",s.target.value),className:"w-full p-3 border border-border-primary rounded-lg text-[14px] placeholder:text-placeholder"}),d.placeName&&e.jsx("p",{className:"text-[12px] text-red-600 mt-1",children:d.placeName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[14px] font-semibold mb-2 block",children:"Address"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",placeholder:"10 high street",value:l.addressLine1,onChange:s=>c("addressLine1",s.target.value),className:"w-full p-2 border border-border-primary rounded-lg placeholder:text-placeholder"}),d.addressLine1&&e.jsx("p",{className:"text-[12px] text-red-600 mt-1",children:d.addressLine1})]}),e.jsxs("div",{children:[e.jsx("input",{type:"text",placeholder:"10 high street",value:l.addressLine2,onChange:s=>c("addressLine2",s.target.value),className:"w-full p-2 border border-border-primary rounded-lg placeholder:text-placeholder"}),d.addressLine2&&e.jsx("p",{className:"text-[12px] text-red-600 mt-1",children:d.addressLine2})]}),e.jsxs("div",{children:[e.jsx("input",{type:"text",placeholder:"B1 2JO",value:l.addressLine3,onChange:s=>c("addressLine3",s.target.value),className:"w-full p-2 border border-border-primary rounded-lg placeholder:text-placeholder"}),d.addressLine3&&e.jsx("p",{className:"text-[12px] text-red-600 mt-1",children:d.addressLine3})]})]})]}),e.jsx(v,{variant:"submit",onClick:p,disabled:o,children:o?"Adding...":"Add Address"})]})]})})}const F=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:15,height:15,viewBox:"0 0 15 15",fill:"none",children:e.jsx("path",{d:"M9.64286 0H5.35714V5.35714H0V9.64286H5.35714V15H9.64286V9.64286H15V5.35714H9.64286V0Z",fill:"black"})}),L=(x,r,l=500)=>{const[i,d]=n.useState(!1),[t,o]=n.useState(null),u=()=>{d(!0);const p=globalThis.setTimeout(()=>{r(),d(!1)},l);o(p)},c=()=>{t&&(clearTimeout(t),o(null),i&&x()),d(!1)},m=()=>{t&&(clearTimeout(t),o(null)),d(!1)};return n.useEffect(()=>()=>{t&&clearTimeout(t)},[t]),{isPressed:i,handlers:{onTouchStart:u,onTouchEnd:c,onTouchCancel:m,onMouseDown:u,onMouseUp:c,onMouseLeave:m}}},U=()=>{const x=E(),[r,l]=n.useState(""),[i,d]=n.useState(!1),[t,o]=n.useState({vegetarian:!1,halal:!1,kosher:!1}),[u,c]=n.useState(!1),[m,p]=n.useState(!1),[f,s]=n.useState("Home"),a=j=>{l(j.target.value),d(!1)},h=()=>{i||d(!0)},b=j=>{s(j),c(!0)},P=()=>{p(!0)},N=L(()=>x("/"),()=>b("Home")),w=L(()=>x("/"),()=>b("Work")),k=[{address1:"10 Downing Street",address2:"London SW1A 2AA"},{address1:"Buckingham Palace",address2:"London SW1A 1AA"},{address1:"London Eye",address2:"Riverside Building, County Hall, London SE1 7PB"},{address1:"Big Ben",address2:"Riverside Building, County Hall, London SE1 7PB"}];return e.jsxs("div",{className:"text-[15px] pt-3 pb-5 px-3",children:[e.jsxs("div",{className:"relative mb-3",children:[e.jsx("div",{className:"absolute left-2 top-1/2 -translate-y-1/2",children:e.jsx(T,{width:12,height:12})}),e.jsx("input",{type:"text",value:r,onChange:a,placeholder:"Search for an address",className:"w-full border border-border-primary placeholder:text-placeholder rounded-lg p-2 pl-7"})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsxs("button",{...N.handlers,className:g("rounded-lg border border-black p-2 flex items-center gap-2 transition-colors","select-none touch-manipulation [-webkit-touch-callout:none] [-webkit-user-select:none]",N.isPressed&&"bg-gray-200"),children:[e.jsx(V,{active:!0,width:15,height:15}),e.jsx("span",{className:"font-semibold",children:"Home"})]}),e.jsxs("button",{...w.handlers,className:g("rounded-lg border border-black p-2 flex items-center gap-2 transition-colors","select-none touch-manipulation [-webkit-touch-callout:none] [-webkit-user-select:none]",w.isPressed&&"bg-gray-200"),children:[e.jsx(A,{}),e.jsx("span",{className:"font-semibold",children:"Work"})]}),e.jsxs("button",{onClick:P,className:"rounded-lg border border-black p-2 flex items-center gap-2",children:[e.jsx(F,{}),e.jsx("span",{className:"font-semibold",children:"Add"})]})]}),!r&&k.map((j,C)=>e.jsxs("div",{className:"flex gap-2 ml-2 mb-3",children:[e.jsx("div",{className:"mt-1",children:e.jsx(D,{width:14,height:16})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:j.address1}),e.jsx("div",{children:j.address2})]})]},C)),r&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"font-semibold flex items-center gap-1 mb-2",children:[e.jsx(M,{size:20,strokeWidth:2.5})," Not Found"]}),e.jsx(v,{variant:"submit",onClick:h,className:g("w-fit",{"bg-[#484848] gap-1":i}),children:i?e.jsxs(e.Fragment,{children:["Requested",e.jsx(B,{size:14,color:"white"})]}):"Request this area"})]}),e.jsx("div",{className:"mt-8",children:e.jsx(Z,{preferences:t,setPreferences:o})}),e.jsx(I,{open:u,onOpenChange:c,addressType:f}),e.jsx(q,{open:m,onOpenChange:p})]})};export{U as default};
